(function(){"use strict";const st={equals:(t,e)=>t===e};let Ht=Yt;const $=1,at=2,Kt={owned:null,cleanups:null,context:null,owner:null};var q=null;let gt=null,Oe=null,k=null,M=null,_=null,lt=0;function Ve(t,e){const o=k,r=q,n=t.length===0,i=e===void 0?r:e,a=n?Kt:{owned:null,cleanups:null,context:i?i.context:null,owner:i},s=n?t:()=>t(()=>X(()=>nt(a)));q=a,k=null;try{return et(s,!0)}finally{k=o,q=r}}function O(t,e){e=e?Object.assign({},st,e):st;const o={value:t,observers:null,observerSlots:null,comparator:e.equals||void 0},r=n=>(typeof n=="function"&&(n=n(o.value)),Gt(o,n));return[Jt.bind(o),r]}function V(t,e,o){const r=pt(t,e,!1,$);tt(r)}function je(t,e,o){Ht=Ge;const r=pt(t,e,!1,$);r.user=!0,_?_.push(r):tt(r)}function Z(t,e,o){o=o?Object.assign({},st,o):st;const r=pt(t,e,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=o.equals||void 0,tt(r),Jt.bind(r)}function X(t){if(k===null)return t();const e=k;k=null;try{return t()}finally{k=e}}function He(t){return q===null||(q.cleanups===null?q.cleanups=[t]:q.cleanups.push(t)),t}function Jt(){if(this.sources&&this.state)if(this.state===$)tt(this);else{const t=M;M=null,et(()=>ct(this),!1),M=t}if(k){const t=this.observers?this.observers.length:0;k.sources?(k.sources.push(this),k.sourceSlots.push(t)):(k.sources=[this],k.sourceSlots=[t]),this.observers?(this.observers.push(k),this.observerSlots.push(k.sources.length-1)):(this.observers=[k],this.observerSlots=[k.sources.length-1])}return this.value}function Gt(t,e,o){let r=t.value;return(!t.comparator||!t.comparator(r,e))&&(t.value=e,t.observers&&t.observers.length&&et(()=>{for(let n=0;n<t.observers.length;n+=1){const i=t.observers[n],a=gt&&gt.running;a&&gt.disposed.has(i),(a?!i.tState:!i.state)&&(i.pure?M.push(i):_.push(i),i.observers&&Qt(i)),a||(i.state=$)}if(M.length>1e6)throw M=[],new Error},!1)),e}function tt(t){if(!t.fn)return;nt(t);const e=lt;Ke(t,t.value,e)}function Ke(t,e,o){let r;const n=q,i=k;k=q=t;try{r=t.fn(e)}catch(a){return t.pure&&(t.state=$,t.owned&&t.owned.forEach(nt),t.owned=null),t.updatedAt=o+1,Wt(a)}finally{k=i,q=n}(!t.updatedAt||t.updatedAt<=o)&&(t.updatedAt!=null&&"observers"in t?Gt(t,r):t.value=r,t.updatedAt=o)}function pt(t,e,o,r=$,n){const i={fn:t,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:q,context:q?q.context:null,pure:o};return q===null||q!==Kt&&(q.owned?q.owned.push(i):q.owned=[i]),i}function ut(t){if(t.state===0)return;if(t.state===at)return ct(t);if(t.suspense&&X(t.suspense.inFallback))return t.suspense.effects.push(t);const e=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<lt);)t.state&&e.push(t);for(let o=e.length-1;o>=0;o--)if(t=e[o],t.state===$)tt(t);else if(t.state===at){const r=M;M=null,et(()=>ct(t,e[0]),!1),M=r}}function et(t,e){if(M)return t();let o=!1;e||(M=[]),_?o=!0:_=[],lt++;try{const r=t();return Je(o),r}catch(r){o||(_=null),M=null,Wt(r)}}function Je(t){if(M&&(Yt(M),M=null),t)return;const e=_;_=null,e.length&&et(()=>Ht(e),!1)}function Yt(t){for(let e=0;e<t.length;e++)ut(t[e])}function Ge(t){let e,o=0;for(e=0;e<t.length;e++){const r=t[e];r.user?t[o++]=r:ut(r)}for(e=0;e<o;e++)ut(t[e])}function ct(t,e){t.state=0;for(let o=0;o<t.sources.length;o+=1){const r=t.sources[o];if(r.sources){const n=r.state;n===$?r!==e&&(!r.updatedAt||r.updatedAt<lt)&&ut(r):n===at&&ct(r,e)}}}function Qt(t){for(let e=0;e<t.observers.length;e+=1){const o=t.observers[e];o.state||(o.state=at,o.pure?M.push(o):_.push(o),o.observers&&Qt(o))}}function nt(t){let e;if(t.sources)for(;t.sources.length;){const o=t.sources.pop(),r=t.sourceSlots.pop(),n=o.observers;if(n&&n.length){const i=n.pop(),a=o.observerSlots.pop();r<n.length&&(i.sourceSlots[a]=r,n[r]=i,o.observerSlots[r]=a)}}if(t.tOwned){for(e=t.tOwned.length-1;e>=0;e--)nt(t.tOwned[e]);delete t.tOwned}if(t.owned){for(e=t.owned.length-1;e>=0;e--)nt(t.owned[e]);t.owned=null}if(t.cleanups){for(e=t.cleanups.length-1;e>=0;e--)t.cleanups[e]();t.cleanups=null}t.state=0}function Ye(t){return t instanceof Error?t:new Error(typeof t=="string"?t:"Unknown error",{cause:t})}function Wt(t,e=q){throw Ye(t)}function G(t,e){return X(()=>t(e||{}))}const Qe=t=>`Stale read from <${t}>.`;function rt(t){const e=t.keyed,o=Z(()=>t.when,void 0,void 0),r=e?o:Z(o,void 0,{equals:(n,i)=>!n==!i});return Z(()=>{const n=r();if(n){const i=t.children;return typeof i=="function"&&i.length>0?X(()=>i(e?n:()=>{if(!X(r))throw Qe("Show");return o()})):i}return t.fallback},void 0,void 0)}function We(t,e,o){let r=o.length,n=e.length,i=r,a=0,s=0,l=e[n-1].nextSibling,u=null;for(;a<n||s<i;){if(e[a]===o[s]){a++,s++;continue}for(;e[n-1]===o[i-1];)n--,i--;if(n===a){const c=i<r?s?o[s-1].nextSibling:o[i-s]:l;for(;s<i;)t.insertBefore(o[s++],c)}else if(i===s)for(;a<n;)(!u||!u.has(e[a]))&&e[a].remove(),a++;else if(e[a]===o[i-1]&&o[s]===e[n-1]){const c=e[--n].nextSibling;t.insertBefore(o[s++],e[a++].nextSibling),t.insertBefore(o[--i],c),e[n]=o[i]}else{if(!u){u=new Map;let w=s;for(;w<i;)u.set(o[w],w++)}const c=u.get(e[a]);if(c!=null)if(s<c&&c<i){let w=a,y=1,b;for(;++w<n&&w<i&&!((b=u.get(e[w]))==null||b!==c+y);)y++;if(y>c-s){const v=e[a];for(;s<c;)t.insertBefore(o[s++],v)}else t.replaceChild(o[s++],e[a++])}else a++;else e[a++].remove()}}}const Zt="_$DX_DELEGATE";function Ze(t,e,o,r={}){let n;return Ve(i=>{n=i,e===document?t():D(e,t(),e.firstChild?null:void 0,o)},r.owner),()=>{n(),e.textContent=""}}function H(t,e,o,r){let n;const i=()=>{const s=document.createElement("template");return s.innerHTML=t,s.content.firstChild},a=()=>(n||(n=i())).cloneNode(!0);return a.cloneNode=a,a}function Xe(t,e=window.document){const o=e[Zt]||(e[Zt]=new Set);for(let r=0,n=t.length;r<n;r++){const i=t[r];o.has(i)||(o.add(i),e.addEventListener(i,tn))}}function Xt(t,e,o){o==null?t.removeAttribute(e):t.setAttribute(e,o)}function te(t,e){e==null?t.removeAttribute("class"):t.className=e}function D(t,e,o,r){if(o!==void 0&&!r&&(r=[]),typeof e!="function")return ft(t,e,r,o);V(n=>ft(t,e(),n,o),r)}function tn(t){let e=t.target;const o=`$$${t.type}`,r=t.target,n=t.currentTarget,i=l=>Object.defineProperty(t,"target",{configurable:!0,value:l}),a=()=>{const l=e[o];if(l&&!e.disabled){const u=e[`${o}Data`];if(u!==void 0?l.call(e,u,t):l.call(e,t),t.cancelBubble)return}return e.host&&typeof e.host!="string"&&!e.host._$host&&e.contains(t.target)&&i(e.host),!0},s=()=>{for(;a()&&(e=e._$host||e.parentNode||e.host););};if(Object.defineProperty(t,"currentTarget",{configurable:!0,get(){return e||document}}),t.composedPath){const l=t.composedPath();i(l[0]);for(let u=0;u<l.length-2&&(e=l[u],!!a());u++){if(e._$host){e=e._$host,s();break}if(e.parentNode===n)break}}else s();i(r)}function ft(t,e,o,r,n){for(;typeof o=="function";)o=o();if(e===o)return o;const i=typeof e,a=r!==void 0;if(t=a&&o[0]&&o[0].parentNode||t,i==="string"||i==="number"){if(i==="number"&&(e=e.toString(),e===o))return o;if(a){let s=o[0];s&&s.nodeType===3?s.data!==e&&(s.data=e):s=document.createTextNode(e),o=Y(t,o,r,s)}else o!==""&&typeof o=="string"?o=t.firstChild.data=e:o=t.textContent=e}else if(e==null||i==="boolean")o=Y(t,o,r);else{if(i==="function")return V(()=>{let s=e();for(;typeof s=="function";)s=s();o=ft(t,s,o,r)}),()=>o;if(Array.isArray(e)){const s=[],l=o&&Array.isArray(o);if(bt(s,e,o,n))return V(()=>o=ft(t,s,o,r,!0)),()=>o;if(s.length===0){if(o=Y(t,o,r),a)return o}else l?o.length===0?ee(t,s,r):We(t,o,s):(o&&Y(t),ee(t,s));o=s}else if(e.nodeType){if(Array.isArray(o)){if(a)return o=Y(t,o,r,e);Y(t,o,null,e)}else o==null||o===""||!t.firstChild?t.appendChild(e):t.replaceChild(e,t.firstChild);o=e}}return o}function bt(t,e,o,r){let n=!1;for(let i=0,a=e.length;i<a;i++){let s=e[i],l=o&&o[t.length],u;if(!(s==null||s===!0||s===!1))if((u=typeof s)=="object"&&s.nodeType)t.push(s);else if(Array.isArray(s))n=bt(t,s,l)||n;else if(u==="function")if(r){for(;typeof s=="function";)s=s();n=bt(t,Array.isArray(s)?s:[s],Array.isArray(l)?l:[l])||n}else t.push(s),n=!0;else{const c=String(s);l&&l.nodeType===3&&l.data===c?t.push(l):t.push(document.createTextNode(c))}}return n}function ee(t,e,o=null){for(let r=0,n=e.length;r<n;r++)t.insertBefore(e[r],o)}function Y(t,e,o,r){if(o===void 0)return t.textContent="";const n=r||document.createTextNode("");if(e.length){let i=!1;for(let a=e.length-1;a>=0;a--){const s=e[a];if(n!==s){const l=s.parentNode===t;!i&&!a?l?t.replaceChild(n,s):t.insertBefore(n,o):l&&s.remove()}else i=!0}}else t.insertBefore(n,o);return[n]}class en{constructor(){this.socket=null,this.reconnectTimeout=null,this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.transferId=null,this.signature=null,this.wsBaseUrl="transfer-status.zenobiapay.com",this.onStatusCallback=null,this.onErrorCallback=null,this.onConnectionCallback=null}getSignature(){return this.signature}getTransferId(){return this.transferId}async createTransferAndListen(e,o,r,n,i){r&&(this.onStatusCallback=r),n&&(this.onErrorCallback=n),i&&(this.onConnectionCallback=i);try{const a=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!a.ok){const l=await a.json();throw new Error(l.message||"Failed to create transfer request")}const s=await a.json();return this.transferId=s.transferRequestId,this.signature=s.signature,this.connectWebSocket(),s}catch(a){throw console.error("Error creating transfer request:",a),a instanceof Error?a:new Error("Failed to create transfer request")}}connectWebSocket(){if(this.socket&&(this.socket.close(),this.socket=null,this.notifyConnectionStatus(!1)),!this.transferId||!this.signature){console.error("Cannot connect to WebSocket: Missing transfer ID or signature");return}try{const o=`${window.location.protocol==="https:"?"wss:":"ws:"}//${this.wsBaseUrl}/transfers/${this.transferId}/ws?token=${this.signature}`,r=new WebSocket(o);this.socket=r,r.onopen=()=>{this.notifyConnectionStatus(!0),this.reconnectAttempts=0},r.onclose=n=>{this.notifyConnectionStatus(!1),this.socket=null,n.code!==1e3&&this.reconnectAttempts<this.maxReconnectAttempts&&this.attemptReconnect()},r.onerror=n=>{console.error(`WebSocket error for transfer: ${this.transferId}`,n),this.notifyError("WebSocket error occurred")},r.onmessage=n=>{console.log(`WebSocket message received for transfer: ${this.transferId}`,n.data);try{const i=JSON.parse(n.data);i.type==="status"&&i.transfer?this.notifyStatus(i.transfer):i.type==="error"&&i.message?this.notifyError(i.message):i.type==="ping"&&r.readyState===WebSocket.OPEN&&r.send(JSON.stringify({type:"pong"}))}catch{this.notifyError("Failed to parse message")}}}catch{this.notifyError("Failed to establish WebSocket connection")}}attemptReconnect(){this.reconnectAttempts++;const e=Math.min(1e3*Math.pow(2,this.reconnectAttempts-1),3e4);console.log(`Attempting to reconnect in ${e}ms (attempt ${this.reconnectAttempts})`),this.reconnectTimeout&&window.clearTimeout(this.reconnectTimeout),this.reconnectTimeout=window.setTimeout(()=>{console.log(`Reconnecting to WebSocket (attempt ${this.reconnectAttempts})...`),this.connectWebSocket()},e)}disconnect(){this.reconnectTimeout&&(window.clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.socket&&this.socket.readyState<2&&(console.log(`Closing WebSocket for transfer: ${this.transferId}`),this.socket.close(),this.socket=null,this.notifyConnectionStatus(!1)),this.transferId=null,this.signature=null}notifyConnectionStatus(e){this.onConnectionCallback&&this.onConnectionCallback(e)}notifyStatus(e){this.onStatusCallback&&this.onStatusCallback(e)}notifyError(e){this.onErrorCallback&&this.onErrorCallback(e)}}function nn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Q={},mt,ne;function rn(){return ne||(ne=1,mt=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),mt}var wt={},j={},re;function K(){if(re)return j;re=1;let t;const e=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return j.getSymbolSize=function(r){if(!r)throw new Error('"version" cannot be null or undefined');if(r<1||r>40)throw new Error('"version" should be in range from 1 to 40');return r*4+17},j.getSymbolTotalCodewords=function(r){return e[r]},j.getBCHDigit=function(o){let r=0;for(;o!==0;)r++,o>>>=1;return r},j.setToSJISFunction=function(r){if(typeof r!="function")throw new Error('"toSJISFunc" is not a valid function.');t=r},j.isKanjiModeEnabled=function(){return typeof t<"u"},j.toSJIS=function(r){return t(r)},j}var yt={},oe;function Ct(){return oe||(oe=1,function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(o){if(typeof o!="string")throw new Error("Param is not a string");switch(o.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+o)}}t.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},t.from=function(r,n){if(t.isValid(r))return r;try{return e(r)}catch{return n}}}(yt)),yt}var Et,ie;function on(){if(ie)return Et;ie=1;function t(){this.buffer=[],this.length=0}return t.prototype={get:function(e){const o=Math.floor(e/8);return(this.buffer[o]>>>7-e%8&1)===1},put:function(e,o){for(let r=0;r<o;r++)this.putBit((e>>>o-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const o=Math.floor(this.length/8);this.buffer.length<=o&&this.buffer.push(0),e&&(this.buffer[o]|=128>>>this.length%8),this.length++}},Et=t,Et}var St,se;function sn(){if(se)return St;se=1;function t(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}return t.prototype.set=function(e,o,r,n){const i=e*this.size+o;this.data[i]=r,n&&(this.reservedBit[i]=!0)},t.prototype.get=function(e,o){return this.data[e*this.size+o]},t.prototype.xor=function(e,o,r){this.data[e*this.size+o]^=r},t.prototype.isReserved=function(e,o){return this.reservedBit[e*this.size+o]},St=t,St}var At={},ae;function an(){return ae||(ae=1,function(t){const e=K().getSymbolSize;t.getRowColCoords=function(r){if(r===1)return[];const n=Math.floor(r/7)+2,i=e(r),a=i===145?26:Math.ceil((i-13)/(2*n-2))*2,s=[i-7];for(let l=1;l<n-1;l++)s[l]=s[l-1]-a;return s.push(6),s.reverse()},t.getPositions=function(r){const n=[],i=t.getRowColCoords(r),a=i.length;for(let s=0;s<a;s++)for(let l=0;l<a;l++)s===0&&l===0||s===0&&l===a-1||s===a-1&&l===0||n.push([i[s],i[l]]);return n}}(At)),At}var It={},le;function ln(){if(le)return It;le=1;const t=K().getSymbolSize,e=7;return It.getPositions=function(r){const n=t(r);return[[0,0],[n-e,0],[0,n-e]]},It}var Tt={},ue;function un(){return ue||(ue=1,function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(n){return n!=null&&n!==""&&!isNaN(n)&&n>=0&&n<=7},t.from=function(n){return t.isValid(n)?parseInt(n,10):void 0},t.getPenaltyN1=function(n){const i=n.size;let a=0,s=0,l=0,u=null,c=null;for(let w=0;w<i;w++){s=l=0,u=c=null;for(let y=0;y<i;y++){let b=n.get(w,y);b===u?s++:(s>=5&&(a+=e.N1+(s-5)),u=b,s=1),b=n.get(y,w),b===c?l++:(l>=5&&(a+=e.N1+(l-5)),c=b,l=1)}s>=5&&(a+=e.N1+(s-5)),l>=5&&(a+=e.N1+(l-5))}return a},t.getPenaltyN2=function(n){const i=n.size;let a=0;for(let s=0;s<i-1;s++)for(let l=0;l<i-1;l++){const u=n.get(s,l)+n.get(s,l+1)+n.get(s+1,l)+n.get(s+1,l+1);(u===4||u===0)&&a++}return a*e.N2},t.getPenaltyN3=function(n){const i=n.size;let a=0,s=0,l=0;for(let u=0;u<i;u++){s=l=0;for(let c=0;c<i;c++)s=s<<1&2047|n.get(u,c),c>=10&&(s===1488||s===93)&&a++,l=l<<1&2047|n.get(c,u),c>=10&&(l===1488||l===93)&&a++}return a*e.N3},t.getPenaltyN4=function(n){let i=0;const a=n.data.length;for(let l=0;l<a;l++)i+=n.data[l];return Math.abs(Math.ceil(i*100/a/5)-10)*e.N4};function o(r,n,i){switch(r){case t.Patterns.PATTERN000:return(n+i)%2===0;case t.Patterns.PATTERN001:return n%2===0;case t.Patterns.PATTERN010:return i%3===0;case t.Patterns.PATTERN011:return(n+i)%3===0;case t.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(i/3))%2===0;case t.Patterns.PATTERN101:return n*i%2+n*i%3===0;case t.Patterns.PATTERN110:return(n*i%2+n*i%3)%2===0;case t.Patterns.PATTERN111:return(n*i%3+(n+i)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}t.applyMask=function(n,i){const a=i.size;for(let s=0;s<a;s++)for(let l=0;l<a;l++)i.isReserved(l,s)||i.xor(l,s,o(n,l,s))},t.getBestMask=function(n,i){const a=Object.keys(t.Patterns).length;let s=0,l=1/0;for(let u=0;u<a;u++){i(u),t.applyMask(u,n);const c=t.getPenaltyN1(n)+t.getPenaltyN2(n)+t.getPenaltyN3(n)+t.getPenaltyN4(n);t.applyMask(u,n),c<l&&(l=c,s=u)}return s}}(Tt)),Tt}var dt={},ce;function fe(){if(ce)return dt;ce=1;const t=Ct(),e=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],o=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return dt.getBlocksCount=function(n,i){switch(i){case t.L:return e[(n-1)*4+0];case t.M:return e[(n-1)*4+1];case t.Q:return e[(n-1)*4+2];case t.H:return e[(n-1)*4+3];default:return}},dt.getTotalCodewordsCount=function(n,i){switch(i){case t.L:return o[(n-1)*4+0];case t.M:return o[(n-1)*4+1];case t.Q:return o[(n-1)*4+2];case t.H:return o[(n-1)*4+3];default:return}},dt}var Bt={},ot={},de;function cn(){if(de)return ot;de=1;const t=new Uint8Array(512),e=new Uint8Array(256);return function(){let r=1;for(let n=0;n<255;n++)t[n]=r,e[r]=n,r<<=1,r&256&&(r^=285);for(let n=255;n<512;n++)t[n]=t[n-255]}(),ot.log=function(r){if(r<1)throw new Error("log("+r+")");return e[r]},ot.exp=function(r){return t[r]},ot.mul=function(r,n){return r===0||n===0?0:t[e[r]+e[n]]},ot}var he;function fn(){return he||(he=1,function(t){const e=cn();t.mul=function(r,n){const i=new Uint8Array(r.length+n.length-1);for(let a=0;a<r.length;a++)for(let s=0;s<n.length;s++)i[a+s]^=e.mul(r[a],n[s]);return i},t.mod=function(r,n){let i=new Uint8Array(r);for(;i.length-n.length>=0;){const a=i[0];for(let l=0;l<n.length;l++)i[l]^=e.mul(n[l],a);let s=0;for(;s<i.length&&i[s]===0;)s++;i=i.slice(s)}return i},t.generateECPolynomial=function(r){let n=new Uint8Array([1]);for(let i=0;i<r;i++)n=t.mul(n,new Uint8Array([1,e.exp(i)]));return n}}(Bt)),Bt}var Nt,ge;function dn(){if(ge)return Nt;ge=1;const t=fn();function e(o){this.genPoly=void 0,this.degree=o,this.degree&&this.initialize(this.degree)}return e.prototype.initialize=function(r){this.degree=r,this.genPoly=t.generateECPolynomial(this.degree)},e.prototype.encode=function(r){if(!this.genPoly)throw new Error("Encoder not initialized");const n=new Uint8Array(r.length+this.degree);n.set(r);const i=t.mod(n,this.genPoly),a=this.degree-i.length;if(a>0){const s=new Uint8Array(this.degree);return s.set(i,a),s}return i},Nt=e,Nt}var vt={},Rt={},Pt={},pe;function be(){return pe||(pe=1,Pt.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}),Pt}var x={},me;function we(){if(me)return x;me=1;const t="[0-9]+",e="[A-Z $%*+\\-./:]+";let o="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";o=o.replace(/u/g,"\\u");const r="(?:(?![A-Z0-9 $%*+\\-./:]|"+o+`)(?:.|[\r
]))+`;x.KANJI=new RegExp(o,"g"),x.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),x.BYTE=new RegExp(r,"g"),x.NUMERIC=new RegExp(t,"g"),x.ALPHANUMERIC=new RegExp(e,"g");const n=new RegExp("^"+o+"$"),i=new RegExp("^"+t+"$"),a=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return x.testKanji=function(l){return n.test(l)},x.testNumeric=function(l){return i.test(l)},x.testAlphanumeric=function(l){return a.test(l)},x}var ye;function J(){return ye||(ye=1,function(t){const e=be(),o=we();t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(i,a){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!e.isValid(a))throw new Error("Invalid version: "+a);return a>=1&&a<10?i.ccBits[0]:a<27?i.ccBits[1]:i.ccBits[2]},t.getBestModeForData=function(i){return o.testNumeric(i)?t.NUMERIC:o.testAlphanumeric(i)?t.ALPHANUMERIC:o.testKanji(i)?t.KANJI:t.BYTE},t.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},t.isValid=function(i){return i&&i.bit&&i.ccBits};function r(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+n)}}t.from=function(i,a){if(t.isValid(i))return i;try{return r(i)}catch{return a}}}(Rt)),Rt}var Ce;function hn(){return Ce||(Ce=1,function(t){const e=K(),o=fe(),r=Ct(),n=J(),i=be(),a=7973,s=e.getBCHDigit(a);function l(y,b,v){for(let T=1;T<=40;T++)if(b<=t.getCapacity(T,v,y))return T}function u(y,b){return n.getCharCountIndicator(y,b)+4}function c(y,b){let v=0;return y.forEach(function(T){const P=u(T.mode,b);v+=P+T.getBitsLength()}),v}function w(y,b){for(let v=1;v<=40;v++)if(c(y,v)<=t.getCapacity(v,b,n.MIXED))return v}t.from=function(b,v){return i.isValid(b)?parseInt(b,10):v},t.getCapacity=function(b,v,T){if(!i.isValid(b))throw new Error("Invalid QR Code version");typeof T>"u"&&(T=n.BYTE);const P=e.getSymbolTotalCodewords(b),B=o.getTotalCodewordsCount(b,v),R=(P-B)*8;if(T===n.MIXED)return R;const N=R-u(T,b);switch(T){case n.NUMERIC:return Math.floor(N/10*3);case n.ALPHANUMERIC:return Math.floor(N/11*2);case n.KANJI:return Math.floor(N/13);case n.BYTE:default:return Math.floor(N/8)}},t.getBestVersionForData=function(b,v){let T;const P=r.from(v,r.M);if(Array.isArray(b)){if(b.length>1)return w(b,P);if(b.length===0)return 1;T=b[0]}else T=b;return l(T.mode,T.getLength(),P)},t.getEncodedBits=function(b){if(!i.isValid(b)||b<7)throw new Error("Invalid QR Code version");let v=b<<12;for(;e.getBCHDigit(v)-s>=0;)v^=a<<e.getBCHDigit(v)-s;return b<<12|v}}(vt)),vt}var kt={},Ee;function gn(){if(Ee)return kt;Ee=1;const t=K(),e=1335,o=21522,r=t.getBCHDigit(e);return kt.getEncodedBits=function(i,a){const s=i.bit<<3|a;let l=s<<10;for(;t.getBCHDigit(l)-r>=0;)l^=e<<t.getBCHDigit(l)-r;return(s<<10|l)^o},kt}var qt={},Mt,Se;function pn(){if(Se)return Mt;Se=1;const t=J();function e(o){this.mode=t.NUMERIC,this.data=o.toString()}return e.getBitsLength=function(r){return 10*Math.floor(r/3)+(r%3?r%3*3+1:0)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(r){let n,i,a;for(n=0;n+3<=this.data.length;n+=3)i=this.data.substr(n,3),a=parseInt(i,10),r.put(a,10);const s=this.data.length-n;s>0&&(i=this.data.substr(n),a=parseInt(i,10),r.put(a,s*3+1))},Mt=e,Mt}var Lt,Ae;function bn(){if(Ae)return Lt;Ae=1;const t=J(),e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function o(r){this.mode=t.ALPHANUMERIC,this.data=r}return o.getBitsLength=function(n){return 11*Math.floor(n/2)+6*(n%2)},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(n){let i;for(i=0;i+2<=this.data.length;i+=2){let a=e.indexOf(this.data[i])*45;a+=e.indexOf(this.data[i+1]),n.put(a,11)}this.data.length%2&&n.put(e.indexOf(this.data[i]),6)},Lt=o,Lt}var xt,Ie;function mn(){if(Ie)return xt;Ie=1;const t=J();function e(o){this.mode=t.BYTE,typeof o=="string"?this.data=new TextEncoder().encode(o):this.data=new Uint8Array(o)}return e.getBitsLength=function(r){return r*8},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(o){for(let r=0,n=this.data.length;r<n;r++)o.put(this.data[r],8)},xt=e,xt}var _t,Te;function wn(){if(Te)return _t;Te=1;const t=J(),e=K();function o(r){this.mode=t.KANJI,this.data=r}return o.getBitsLength=function(n){return n*13},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(r){let n;for(n=0;n<this.data.length;n++){let i=e.toSJIS(this.data[n]);if(i>=33088&&i<=40956)i-=33088;else if(i>=57408&&i<=60351)i-=49472;else throw new Error("Invalid SJIS character: "+this.data[n]+`
Make sure your charset is UTF-8`);i=(i>>>8&255)*192+(i&255),r.put(i,13)}},_t=o,_t}var Dt={exports:{}},Be;function yn(){return Be||(Be=1,function(t){var e={single_source_shortest_paths:function(o,r,n){var i={},a={};a[r]=0;var s=e.PriorityQueue.make();s.push(r,0);for(var l,u,c,w,y,b,v,T,P;!s.empty();){l=s.pop(),u=l.value,w=l.cost,y=o[u]||{};for(c in y)y.hasOwnProperty(c)&&(b=y[c],v=w+b,T=a[c],P=typeof a[c]>"u",(P||T>v)&&(a[c]=v,s.push(c,v),i[c]=u))}if(typeof n<"u"&&typeof a[n]>"u"){var B=["Could not find a path from ",r," to ",n,"."].join("");throw new Error(B)}return i},extract_shortest_path_from_predecessor_list:function(o,r){for(var n=[],i=r;i;)n.push(i),o[i],i=o[i];return n.reverse(),n},find_path:function(o,r,n){var i=e.single_source_shortest_paths(o,r,n);return e.extract_shortest_path_from_predecessor_list(i,n)},PriorityQueue:{make:function(o){var r=e.PriorityQueue,n={},i;o=o||{};for(i in r)r.hasOwnProperty(i)&&(n[i]=r[i]);return n.queue=[],n.sorter=o.sorter||r.default_sorter,n},default_sorter:function(o,r){return o.cost-r.cost},push:function(o,r){var n={value:o,cost:r};this.queue.push(n),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e}(Dt)),Dt.exports}var Ne;function Cn(){return Ne||(Ne=1,function(t){const e=J(),o=pn(),r=bn(),n=mn(),i=wn(),a=we(),s=K(),l=yn();function u(B){return unescape(encodeURIComponent(B)).length}function c(B,R,N){const I=[];let E;for(;(E=B.exec(N))!==null;)I.push({data:E[0],index:E.index,mode:R,length:E[0].length});return I}function w(B){const R=c(a.NUMERIC,e.NUMERIC,B),N=c(a.ALPHANUMERIC,e.ALPHANUMERIC,B);let I,E;return s.isKanjiModeEnabled()?(I=c(a.BYTE,e.BYTE,B),E=c(a.KANJI,e.KANJI,B)):(I=c(a.BYTE_KANJI,e.BYTE,B),E=[]),R.concat(N,I,E).sort(function(p,d){return p.index-d.index}).map(function(p){return{data:p.data,mode:p.mode,length:p.length}})}function y(B,R){switch(R){case e.NUMERIC:return o.getBitsLength(B);case e.ALPHANUMERIC:return r.getBitsLength(B);case e.KANJI:return i.getBitsLength(B);case e.BYTE:return n.getBitsLength(B)}}function b(B){return B.reduce(function(R,N){const I=R.length-1>=0?R[R.length-1]:null;return I&&I.mode===N.mode?(R[R.length-1].data+=N.data,R):(R.push(N),R)},[])}function v(B){const R=[];for(let N=0;N<B.length;N++){const I=B[N];switch(I.mode){case e.NUMERIC:R.push([I,{data:I.data,mode:e.ALPHANUMERIC,length:I.length},{data:I.data,mode:e.BYTE,length:I.length}]);break;case e.ALPHANUMERIC:R.push([I,{data:I.data,mode:e.BYTE,length:I.length}]);break;case e.KANJI:R.push([I,{data:I.data,mode:e.BYTE,length:u(I.data)}]);break;case e.BYTE:R.push([{data:I.data,mode:e.BYTE,length:u(I.data)}])}}return R}function T(B,R){const N={},I={start:{}};let E=["start"];for(let h=0;h<B.length;h++){const p=B[h],d=[];for(let f=0;f<p.length;f++){const S=p[f],C=""+h+f;d.push(C),N[C]={node:S,lastCount:0},I[C]={};for(let m=0;m<E.length;m++){const g=E[m];N[g]&&N[g].node.mode===S.mode?(I[g][C]=y(N[g].lastCount+S.length,S.mode)-y(N[g].lastCount,S.mode),N[g].lastCount+=S.length):(N[g]&&(N[g].lastCount=S.length),I[g][C]=y(S.length,S.mode)+4+e.getCharCountIndicator(S.mode,R))}}E=d}for(let h=0;h<E.length;h++)I[E[h]].end=0;return{map:I,table:N}}function P(B,R){let N;const I=e.getBestModeForData(B);if(N=e.from(R,I),N!==e.BYTE&&N.bit<I.bit)throw new Error('"'+B+'" cannot be encoded with mode '+e.toString(N)+`.
 Suggested mode is: `+e.toString(I));switch(N===e.KANJI&&!s.isKanjiModeEnabled()&&(N=e.BYTE),N){case e.NUMERIC:return new o(B);case e.ALPHANUMERIC:return new r(B);case e.KANJI:return new i(B);case e.BYTE:return new n(B)}}t.fromArray=function(R){return R.reduce(function(N,I){return typeof I=="string"?N.push(P(I,null)):I.data&&N.push(P(I.data,I.mode)),N},[])},t.fromString=function(R,N){const I=w(R,s.isKanjiModeEnabled()),E=v(I),h=T(E,N),p=l.find_path(h.map,"start","end"),d=[];for(let f=1;f<p.length-1;f++)d.push(h.table[p[f]].node);return t.fromArray(b(d))},t.rawSplit=function(R){return t.fromArray(w(R,s.isKanjiModeEnabled()))}}(qt)),qt}var ve;function En(){if(ve)return wt;ve=1;const t=K(),e=Ct(),o=on(),r=sn(),n=an(),i=ln(),a=un(),s=fe(),l=dn(),u=hn(),c=gn(),w=J(),y=Cn();function b(h,p){const d=h.size,f=i.getPositions(p);for(let S=0;S<f.length;S++){const C=f[S][0],m=f[S][1];for(let g=-1;g<=7;g++)if(!(C+g<=-1||d<=C+g))for(let A=-1;A<=7;A++)m+A<=-1||d<=m+A||(g>=0&&g<=6&&(A===0||A===6)||A>=0&&A<=6&&(g===0||g===6)||g>=2&&g<=4&&A>=2&&A<=4?h.set(C+g,m+A,!0,!0):h.set(C+g,m+A,!1,!0))}}function v(h){const p=h.size;for(let d=8;d<p-8;d++){const f=d%2===0;h.set(d,6,f,!0),h.set(6,d,f,!0)}}function T(h,p){const d=n.getPositions(p);for(let f=0;f<d.length;f++){const S=d[f][0],C=d[f][1];for(let m=-2;m<=2;m++)for(let g=-2;g<=2;g++)m===-2||m===2||g===-2||g===2||m===0&&g===0?h.set(S+m,C+g,!0,!0):h.set(S+m,C+g,!1,!0)}}function P(h,p){const d=h.size,f=u.getEncodedBits(p);let S,C,m;for(let g=0;g<18;g++)S=Math.floor(g/3),C=g%3+d-8-3,m=(f>>g&1)===1,h.set(S,C,m,!0),h.set(C,S,m,!0)}function B(h,p,d){const f=h.size,S=c.getEncodedBits(p,d);let C,m;for(C=0;C<15;C++)m=(S>>C&1)===1,C<6?h.set(C,8,m,!0):C<8?h.set(C+1,8,m,!0):h.set(f-15+C,8,m,!0),C<8?h.set(8,f-C-1,m,!0):C<9?h.set(8,15-C-1+1,m,!0):h.set(8,15-C-1,m,!0);h.set(f-8,8,1,!0)}function R(h,p){const d=h.size;let f=-1,S=d-1,C=7,m=0;for(let g=d-1;g>0;g-=2)for(g===6&&g--;;){for(let A=0;A<2;A++)if(!h.isReserved(S,g-A)){let L=!1;m<p.length&&(L=(p[m]>>>C&1)===1),h.set(S,g-A,L),C--,C===-1&&(m++,C=7)}if(S+=f,S<0||d<=S){S-=f,f=-f;break}}}function N(h,p,d){const f=new o;d.forEach(function(A){f.put(A.mode.bit,4),f.put(A.getLength(),w.getCharCountIndicator(A.mode,h)),A.write(f)});const S=t.getSymbolTotalCodewords(h),C=s.getTotalCodewordsCount(h,p),m=(S-C)*8;for(f.getLengthInBits()+4<=m&&f.put(0,4);f.getLengthInBits()%8!==0;)f.putBit(0);const g=(m-f.getLengthInBits())/8;for(let A=0;A<g;A++)f.put(A%2?17:236,8);return I(f,h,p)}function I(h,p,d){const f=t.getSymbolTotalCodewords(p),S=s.getTotalCodewordsCount(p,d),C=f-S,m=s.getBlocksCount(p,d),g=f%m,A=m-g,L=Math.floor(f/m),z=Math.floor(C/m),it=z+1,Ue=L-z,qn=new l(Ue);let $t=0;const ht=new Array(m),Fe=new Array(m);let Ot=0;const Mn=new Uint8Array(h.buffer);for(let W=0;W<m;W++){const jt=W<A?z:it;ht[W]=Mn.slice($t,$t+jt),Fe[W]=qn.encode(ht[W]),$t+=jt,Ot=Math.max(Ot,jt)}const Vt=new Uint8Array(f);let $e=0,U,F;for(U=0;U<Ot;U++)for(F=0;F<m;F++)U<ht[F].length&&(Vt[$e++]=ht[F][U]);for(U=0;U<Ue;U++)for(F=0;F<m;F++)Vt[$e++]=Fe[F][U];return Vt}function E(h,p,d,f){let S;if(Array.isArray(h))S=y.fromArray(h);else if(typeof h=="string"){let L=p;if(!L){const z=y.rawSplit(h);L=u.getBestVersionForData(z,d)}S=y.fromString(h,L||40)}else throw new Error("Invalid data");const C=u.getBestVersionForData(S,d);if(!C)throw new Error("The amount of data is too big to be stored in a QR Code");if(!p)p=C;else if(p<C)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+C+`.
`);const m=N(p,d,S),g=t.getSymbolSize(p),A=new r(g);return b(A,p),v(A),T(A,p),B(A,d,0),p>=7&&P(A,p),R(A,m),isNaN(f)&&(f=a.getBestMask(A,B.bind(null,A,d))),a.applyMask(f,A),B(A,d,f),{modules:A,version:p,errorCorrectionLevel:d,maskPattern:f,segments:S}}return wt.create=function(p,d){if(typeof p>"u"||p==="")throw new Error("No input text");let f=e.M,S,C;return typeof d<"u"&&(f=e.from(d.errorCorrectionLevel,e.M),S=u.from(d.version),C=a.from(d.maskPattern),d.toSJISFunc&&t.setToSJISFunction(d.toSJISFunc)),E(p,S,f,C)},wt}var zt={},Ut={},Re;function Pe(){return Re||(Re=1,function(t){function e(o){if(typeof o=="number"&&(o=o.toString()),typeof o!="string")throw new Error("Color should be defined as hex string");let r=o.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+o);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(i){return[i,i]}))),r.length===6&&r.push("F","F");const n=parseInt(r.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:n&255,hex:"#"+r.slice(0,6).join("")}}t.getOptions=function(r){r||(r={}),r.color||(r.color={});const n=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,i=r.width&&r.width>=21?r.width:void 0,a=r.scale||4;return{width:i,scale:i?4:a,margin:n,color:{dark:e(r.color.dark||"#000000ff"),light:e(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},t.getScale=function(r,n){return n.width&&n.width>=r+n.margin*2?n.width/(r+n.margin*2):n.scale},t.getImageWidth=function(r,n){const i=t.getScale(r,n);return Math.floor((r+n.margin*2)*i)},t.qrToImageData=function(r,n,i){const a=n.modules.size,s=n.modules.data,l=t.getScale(a,i),u=Math.floor((a+i.margin*2)*l),c=i.margin*l,w=[i.color.light,i.color.dark];for(let y=0;y<u;y++)for(let b=0;b<u;b++){let v=(y*u+b)*4,T=i.color.light;if(y>=c&&b>=c&&y<u-c&&b<u-c){const P=Math.floor((y-c)/l),B=Math.floor((b-c)/l);T=w[s[P*a+B]?1:0]}r[v++]=T.r,r[v++]=T.g,r[v++]=T.b,r[v]=T.a}}}(Ut)),Ut}var ke;function Sn(){return ke||(ke=1,function(t){const e=Pe();function o(n,i,a){n.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=a,i.width=a,i.style.height=a+"px",i.style.width=a+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(i,a,s){let l=s,u=a;typeof l>"u"&&(!a||!a.getContext)&&(l=a,a=void 0),a||(u=r()),l=e.getOptions(l);const c=e.getImageWidth(i.modules.size,l),w=u.getContext("2d"),y=w.createImageData(c,c);return e.qrToImageData(y.data,i,l),o(w,u,c),w.putImageData(y,0,0),u},t.renderToDataURL=function(i,a,s){let l=s;typeof l>"u"&&(!a||!a.getContext)&&(l=a,a=void 0),l||(l={});const u=t.render(i,a,l),c=l.type||"image/png",w=l.rendererOpts||{};return u.toDataURL(c,w.quality)}}(zt)),zt}var Ft={},qe;function An(){if(qe)return Ft;qe=1;const t=Pe();function e(n,i){const a=n.a/255,s=i+'="'+n.hex+'"';return a<1?s+" "+i+'-opacity="'+a.toFixed(2).slice(1)+'"':s}function o(n,i,a){let s=n+i;return typeof a<"u"&&(s+=" "+a),s}function r(n,i,a){let s="",l=0,u=!1,c=0;for(let w=0;w<n.length;w++){const y=Math.floor(w%i),b=Math.floor(w/i);!y&&!u&&(u=!0),n[w]?(c++,w>0&&y>0&&n[w-1]||(s+=u?o("M",y+a,.5+b+a):o("m",l,0),l=0,u=!1),y+1<i&&n[w+1]||(s+=o("h",c),c=0)):l++}return s}return Ft.render=function(i,a,s){const l=t.getOptions(a),u=i.modules.size,c=i.modules.data,w=u+l.margin*2,y=l.color.light.a?"<path "+e(l.color.light,"fill")+' d="M0 0h'+w+"v"+w+'H0z"/>':"",b="<path "+e(l.color.dark,"stroke")+' d="'+r(c,u,l.margin)+'"/>',v='viewBox="0 0 '+w+" "+w+'"',P='<svg xmlns="http://www.w3.org/2000/svg" '+(l.width?'width="'+l.width+'" height="'+l.width+'" ':"")+v+' shape-rendering="crispEdges">'+y+b+`</svg>
`;return typeof s=="function"&&s(null,P),P},Ft}var Me;function In(){if(Me)return Q;Me=1;const t=rn(),e=En(),o=Sn(),r=An();function n(i,a,s,l,u){const c=[].slice.call(arguments,1),w=c.length,y=typeof c[w-1]=="function";if(!y&&!t())throw new Error("Callback required as last argument");if(y){if(w<2)throw new Error("Too few arguments provided");w===2?(u=s,s=a,a=l=void 0):w===3&&(a.getContext&&typeof u>"u"?(u=l,l=void 0):(u=l,l=s,s=a,a=void 0))}else{if(w<1)throw new Error("Too few arguments provided");return w===1?(s=a,a=l=void 0):w===2&&!a.getContext&&(l=s,s=a,a=void 0),new Promise(function(b,v){try{const T=e.create(s,l);b(i(T,a,l))}catch(T){v(T)}})}try{const b=e.create(s,l);u(null,i(b,a,l))}catch(b){u(b)}}return Q.create=e.create,Q.toCanvas=n.bind(null,o.render),Q.toDataURL=n.bind(null,o.renderToDataURL),Q.toString=n.bind(null,function(i,a,s){return r.render(i,s)}),Q}var Tn=In();const Bn=nn(Tn);var Nn=H(`<div class=zenobia-payment-container><style>
          .zenobia-payment-container {
            position: relative;
            width: 240px;
            z-index: 1;
          }

          .zenobia-payment-button {
            width: 100%;
            height: 48px;
            border-radius: 24px;
            padding: 0 24px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            font-size: 16px;
            font-weight: 500;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            position: relative;
            z-index: 2;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
          }

          .zenobia-payment-button:disabled {
            cursor: not-allowed;
            background-color: #e5e7eb;
            color: #9ca3af;
            box-shadow: none;
            transform: none;
          }

          .zenobia-payment-button:not(:disabled) {
            background-color: black;
            color: white;
          }

          .zenobia-payment-button:not(:disabled):hover {
            background-color: #222222;
            transform: translateY(-2px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
          }

          .zenobia-payment-button:not(:disabled):active {
            transform: translateY(0);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
          }

          .zenobia-qr-tooltip {
            position: absolute;
            left: 0;
            right: 0;
            /* margin-top: 8px; */ /* Removed for dynamic positioning */
            transform: translateY(0);
            opacity: 1;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 3;
          }

          .zenobia-qr-tooltip.below {
            margin-top: 8px;
          }
          .zenobia-qr-tooltip.above {
            bottom: 100%;
            margin-bottom: 8px;
          }

          .zenobia-qr-tooltip.expanding {
            opacity: 0;
            transform: translateY(8px);
          }
          .zenobia-qr-tooltip.above.expanding {
            transform: translateY(-8px);
          }


          .zenobia-qr-caret {
            position: absolute;
            /* top: -8px; */ /* Removed for dynamic positioning */
            left: 50%;
            transform: translateX(-50%) rotate(45deg);
            width: 16px;
            height: 16px;
            background-color: white;
            border-top: 1px solid #e5e7eb;
            border-left: 1px solid #e5e7eb;
            z-index: 4;
          }

          .zenobia-qr-tooltip.below .zenobia-qr-caret {
            top: -8px;
            border-top: 1px solid #e5e7eb;
            border-left: 1px solid #e5e7eb;
            border-bottom: none;
            border-right: none;
          }

          .zenobia-qr-tooltip.above .zenobia-qr-caret {
            bottom: -8px;
            border-bottom: 1px solid #e5e7eb;
            border-right: 1px solid #e5e7eb;
            border-top: none;
            border-left: none;
          }


          .zenobia-qr-content {
            position: relative;
            background-color: white;
            border-radius: 16px;
            border: 1px solid #e5e7eb;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            padding: 16px;
            z-index: 3;
          }

          /* Styles for Popup */
          .zenobia-qr-popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 999;
            opacity: 0;
            transition: opacity 0.3s ease;
          }
          .zenobia-qr-popup-overlay.visible {
            opacity: 1;
          }
          .zenobia-qr-popup-content {
            background-color: white;
            border-radius: 16px;
            padding: 24px; /* Increased padding for popup */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            position: relative; /* For close button positioning */
            width: auto; /* Auto width based on content */
            max-width: 90%; /* Max width to prevent overflow */
          }


          .zenobia-qr-close {
            position: absolute;
            top: 12px;
            right: 12px;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background-color: #f3f4f6;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
          }

          .zenobia-qr-close:hover {
            background-color: #e5e7eb;
          }

          .zenobia-qr-close svg {
            width: 12px;
            height: 12px;
            stroke: #4b5563;
          }

          .zenobia-qr-loading {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: 140px;
            background-color: white;
          }

          .zenobia-qr-spinner {
            width: 24px;
            height: 24px;
            border: 2px solid #d1d5db;
            border-top-color: black;
            border-radius: 50%;
            animation: spin 1s linear infinite;
          }

          .zenobia-qr-image {
            width: 140px;
            height: 140px;
            object-fit: contain;
            background-color: white;
          }

          .zenobia-qr-instructions {
            font-size: 14px;
            color: #4b5563;
            margin-bottom: 12px;
            text-align: center;
          }

          .zenobia-error {
            color: #ef4444;
            font-size: 12px;
            margin-top: 12px;
            text-align: center;
          }

          @keyframes spin {
            to {
              transform: rotate(360deg);
            }
          }
        </style><button class=zenobia-payment-button>`),Le=H('<div style=display:flex;justify-content:center;><img alt="Transfer QR Code"class=zenobia-qr-image>'),xe=H("<div class=zenobia-error>"),vn=H('<div><div class=zenobia-qr-caret></div><div class=zenobia-qr-content><button class=zenobia-qr-close><svg viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2><path d="M18 6L6 18M6 6l12 12"></path></svg></button><div style=text-align:center;>'),_e=H("<div class=zenobia-qr-loading><div class=zenobia-qr-spinner>"),De=H("<p class=zenobia-qr-instructions>Point your iPhone camera to pay"),Rn=H('<div><div class=zenobia-qr-popup-content><button class=zenobia-qr-close><svg viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2><path d="M18 6L6 18M6 6l12 12"></path></svg></button><div style=text-align:center;>');const ze=()=>{if(typeof window>"u")return!1;const t=window.navigator.userAgent.toLowerCase();return/iphone|ipad|ipod/.test(t)||t.includes("mac")&&"ontouchend"in document},Pn=t=>{const[e,o]=O(!1),[r,n]=O("INITIAL"),[i,a]=O(null),[s,l]=O(null),[u,c]=O("PENDING"),[w,y]=O(null),[b,v]=O(!1),[T,P]=O(null);je(()=>{const E=i();if(E!=null&&E.transferRequestId&&(E!=null&&E.merchantId)){const h=E.transferRequestId.replace(/-/g,""),d=`https://zenobiapay.com/clip?id=${btoa(h).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}`;console.log("Transfer ID:",E.transferRequestId),console.log("Base64 Transfer ID:",d),ze()?window.location.href=d:Bn.toDataURL(d,{errorCorrectionLevel:"M",margin:1,width:t.qrCodeSize||200}).then(f=>{l(f)}).catch(f=>{console.error("Error generating QR code:",f),y("Failed to generate QR code")})}});const B=E=>{console.log("Received status update:",E);let h;switch(E.status){case"COMPLETED":case"IN_FLIGHT":h="COMPLETED",t.onSuccess&&i()&&t.onSuccess(i(),E);const p=T();p&&(p.disconnect(),P(null));break;case"FAILED":h="FAILED";const d=T();d&&(d.disconnect(),P(null));break;case"CANCELLED":h="CANCELLED";const f=T();f&&(f.disconnect(),P(null));break;default:h="PENDING"}c(h),t.onStatusChange&&t.onStatusChange(h)},R=E=>{console.error("WebSocket error:",E),y(E)},N=E=>{console.log("WebSocket connection status:",E?"Connected":"Disconnected"),v(E)};He(()=>{const E=T();E&&E.disconnect()});const I=async()=>{try{o(!0),n("BUTTON_CLOSING");const E=new en;P(E);const h=t.metadata||{amount:t.amount,statementItems:{name:"Payment",amount:t.amount}},p=await E.createTransferAndListen(t.url,h,B,R,N);a({transferRequestId:p.transferRequestId,merchantId:p.merchantId,expiry:p.expiry,signature:p.signature}),n("QR_EXPANDING"),setTimeout(()=>{n("QR_VISIBLE"),o(!1)},500)}catch(E){o(!1),n("INITIAL"),y(E instanceof Error?E.message:"An error occurred"),t.onError&&E instanceof Error&&t.onError(E)}};return(()=>{var E=Nn(),h=E.firstChild,p=h.nextSibling;return p.$$click=I,D(p,()=>e()?"Loading...":t.buttonText||`Pay ${t.amount}`),D(E,G(rt,{get when(){return Z(()=>!ze())()&&(r()==="QR_EXPANDING"||r()==="QR_VISIBLE")},get children(){return Z(()=>(t.qrPosition||"BELOW")!=="POPUP")()?(()=>{var d=vn(),f=d.firstChild,S=f.nextSibling,C=S.firstChild,m=C.nextSibling;return C.$$click=()=>{n("INITIAL"),a(null),l(null),c("PENDING");const g=T();g&&(g.disconnect(),P(null))},D(m,G(rt,{get when(){return s()},get fallback(){return _e()},get children(){var g=Le(),A=g.firstChild;return V(()=>Xt(A,"src",s()||"")),g}}),null),D(m,G(rt,{get when(){return w()},get fallback(){return De()},get children(){var g=xe();return D(g,w),g}}),null),V(()=>te(d,`zenobia-qr-tooltip ${r()==="QR_EXPANDING"?"expanding":""} ${(t.qrPosition||"BELOW")==="ABOVE"?"above":"below"}`)),d})():(()=>{var d=Rn(),f=d.firstChild,S=f.firstChild,C=S.nextSibling;return S.$$click=()=>{n("INITIAL"),a(null),l(null),c("PENDING");const m=T();m&&(m.disconnect(),P(null))},D(C,G(rt,{get when(){return s()},get fallback(){return _e()},get children(){var m=Le(),g=m.firstChild;return V(A=>{var L=s()||"",z=t.qrCodeSize?`${t.qrCodeSize}px`:"200px",it=t.qrCodeSize?`${t.qrCodeSize}px`:"200px";return L!==A.e&&Xt(g,"src",A.e=L),z!==A.t&&((A.t=z)!=null?g.style.setProperty("width",z):g.style.removeProperty("width")),it!==A.a&&((A.a=it)!=null?g.style.setProperty("height",it):g.style.removeProperty("height")),A},{e:void 0,t:void 0,a:void 0}),m}}),null),D(C,G(rt,{get when(){return w()},get fallback(){return De()},get children(){var m=xe();return D(m,w),m}}),null),V(()=>te(d,`zenobia-qr-popup-overlay ${r()==="QR_VISIBLE"?"visible":""}`)),d})()}}),null),V(d=>{var f=r()!=="INITIAL"?"#222222":"black",S=e()||r()!=="INITIAL";return f!==d.e&&((d.e=f)!=null?p.style.setProperty("background-color",f):p.style.removeProperty("background-color")),S!==d.t&&(p.disabled=d.t=S),d},{e:void 0,t:void 0}),E})()};Xe(["click"]);function kn(t){const e=typeof t.target=="string"?document.querySelector(t.target):t.target;if(!e){console.error("[zenobia-pay] target element not found:",t.target);return}Ze(()=>G(Pn,{get url(){return t.url},get amount(){return t.amount},get metadata(){return t.metadata},get buttonText(){return t.buttonText},get buttonClass(){return t.buttonClass},get qrCodeSize(){return t.qrCodeSize},get onSuccess(){return t.onSuccess},get onError(){return t.onError},get onStatusChange(){return t.onStatusChange}}),e)}window.ZenobiaPay={init:kn}})();
